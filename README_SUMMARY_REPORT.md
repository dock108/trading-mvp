# Summary Report Generator

This document explains how to use the comprehensive summary report functionality for the Trading MVP.

## Overview

The summary report generator (`summary_report.py`) provides detailed analysis of trading simulation results, including:

- **Weekly Allocation Summary**: Shows how capital was allocated each week with contextual descriptions
- **Trade History**: Human-readable trade descriptions with strategy mechanics
- **Performance Metrics**: Final portfolio values and returns for each strategy
- **Strategy Analysis**: Detailed breakdown of trades and performance comparison

## Usage Workflow

### 1. Run Trading Simulation

First, execute the main trading simulation to generate CSV trade logs:

```bash
# Run simulation with both strategies
python main.py --backtest

# Or run with specific strategy
python main.py --backtest --no-rotator  # Wheel only
python main.py --backtest --no-wheel    # Rotator only
```

This generates three CSV files:
- `trades.csv` - Standardized trade format
- `detailed_trades.csv` - Full trade details with notes
- `consolidated_trades.csv` - Combined analysis format

### 2. Generate Summary Report

After simulation completes, run the summary report:

```bash
# Use default CSV files
python summary_report.py

# Or specify custom files
python summary_report.py -t my_trades.csv -d my_detailed_trades.csv

# View help
python summary_report.py --help
```

## Report Sections

### 1. Overall Statistics
- Total trades by strategy
- Net cash flows
- Simulation period coverage

### 2. Weekly Breakdown
- Trade-by-trade details for each week
- Cash flow analysis by strategy
- Week-by-week progress tracking

### 3. Weekly Allocation Summary
Shows portfolio positions with contextual descriptions:
```
Week 1: Wheel – 100 shares SPY (entered via put assignment); Rotator – Rotated to SOL (100% in SOL)
Week 3: Wheel – Exited SPY (sold via covered call, back to cash); Rotator – 100% in SOL (held)
```

### 4. Trade History Summary
Human-readable trade descriptions:
```
Week 1:
  Wheel – Buy 100 shares SPY at $427.50 (put assignment)
  Rotator – Sell 1.0000 BTC at price $52,000
  Rotator – Buy 472.7273 SOL at price $110
```

### 5. Strategy Performance Analysis
- Action breakdown by trade type
- Asset distribution
- Average prices and trading patterns

### 6. Performance Metrics
Final calculations for each strategy:
```
WHEEL STRATEGY PERFORMANCE:
  Initial Capital: $50,000
  Final Capital: $5,526.39
  Total Return: -88.95%

ROTATOR STRATEGY PERFORMANCE:
  Initial Capital: $50,000
  Final Portfolio Value: $30,193.44
  Total Return: -39.61%
```

### 7. Capital Allocation Summary
- Initial setup details
- Net cash flows by strategy
- References to detailed performance metrics

### 8. Backtest Information
- Data source explanation
- Strategy execution details
- Live vs backtest mode differences

## Command Line Options

```bash
python summary_report.py [OPTIONS]

Options:
  -t, --trades-file FILE     Path to trades CSV file (default: trades.csv)
  -d, --detailed-file FILE   Path to detailed trades CSV (default: detailed_trades.csv)
  -h, --help                Show help message and examples
```

## Examples

### Basic Usage
```bash
# 1. Run simulation
python main.py --backtest

# 2. View summary
python summary_report.py
```

### Custom Configuration
```bash
# Run with custom config
python main.py --backtest --config my_config.yaml

# Generate summary from custom files
python summary_report.py -t my_trades.csv
```

### Single Strategy Analysis
```bash
# Run wheel strategy only
python main.py --backtest --no-rotator

# View results
python summary_report.py
```

## Key Features

1. **Standalone Tool**: Can be run independently after simulation
2. **Reusable**: Re-examine results without re-running simulation
3. **Comprehensive**: Shows allocation changes, trade mechanics, and performance
4. **Human-Readable**: Contextual descriptions explain strategy mechanics
5. **Performance Analysis**: Detailed final values and return calculations

## File Requirements

The summary report requires CSV files generated by `main.py`:
- **trades.csv** (required): Basic trade data
- **detailed_trades.csv** (optional): Enhanced trade information

If files are missing, the tool provides clear error messages and usage instructions.

## Integration Options

The summary report is designed as a standalone tool for flexibility, but users can:
1. Run it manually after each simulation for detailed analysis
2. Integrate it into automated workflows
3. Use it to compare results across different configurations

The main simulation automatically displays the command to run the summary report upon completion.